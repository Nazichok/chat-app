<input type="file" class="hidden" (change)="onSelect($event)" #fileUpload />

<div class="flex justify-center relative p-5 mb-5 cursor-pointer">
  @if (user.img) {
    <p-image src="{{ user.img }}" alt="Image" [preview]="true" />
  } @else {
    <div class="flex justify-center">
      <div
        class="flex justify-center items-center rounded-full bg-slate-100 text-xl h-24 aspect-square"
      >
        {{ user.username | avatarLetter }}
      </div>
    </div>
  }
  <p-button
    icon="pi pi-upload"
    class="absolute right-1 bottom-1 hover:scale-110 transform transition duration-150"
    (click)="fileUpload.click()"
    [rounded]="true"
    [text]="true"
    severity="secondary"
  />
</div>

<p-dialog
  appendTo="body"
  header="Update Profile Image"
  [modal]="true"
  [(visible)]="resizeVisible"
  width="50vw"
  [breakpoints]="{
    '960px': '75vw',
    '640px': '90vw',
  }"
>
  <div *ngIf="imageChangedEvent" class="max-w-[300px]">
    <image-cropper
      [imageChangedEvent]="imageChangedEvent"
      [maintainAspectRatio]="true"
      [aspectRatio]="1"
      format="jpeg"
      (imageCropped)="imageCropped($event)"
    ></image-cropper>

    <div class="flex justify-end gap-5">
      <p-button label="Cancel" severity="secondary" (onClick)="cancelUpload()" />
      <p-button label="Save" [loading]="uploadLoading" (onClick)="upload()" />
  </div>
  </div>
</p-dialog>
